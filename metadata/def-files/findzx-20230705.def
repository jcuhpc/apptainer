Bootstrap: docker
From: continuumio/miniconda3

%post
cd /opt
install -d -m 2775 -o root -g root /gpfs01
install -d -m 1777 -o root -g root /scratch /fast/tmp
export PATH="/opt/conda/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin"
git clone https://github.com/hsigeman/findZX.git
conda update conda
conda create -n findZX -c conda-forge -c bioconda python=3.9.4 snakemake-wrapper-utils=0.2.0 snakemake=6.4.0 mamba=0.15.3
export PATH="/opt/conda/envs/findZX/bin:$PATH"
mamba install -c conda-forge -c bioconda pear=0.9.6 spades=3.15.2 bbmap=38.92 bedtools=2.20.0 bwa=0.7.17 freebayes=1.3.5 parallel=20210422 gawk=5.1.0 last=1238 mapcaller=0.9.9.41 vcftools=0.1.16 htslib=1.12 bcftools=1.12 multiqc=1.11 platypus-variant=0.8.1.1 numpy=1.19.2 pandas=1.2.4 scipy=1.6.3 bedtools=2.29.0 r-tibble=3.1.6 r-sjplot=2.8.10 r-ggplot2=3.3.3 r-cowplot=1.1.1 r-data.table=1.14.0 r-doby=4.6.6 r-data.table=1.14.0 r-ggplot2=3.3.3 r-plot3d=1.3 r-cowplot=1.1.1 r-viridislite=0.4.0 r-gridGraphics=0.5_1 r-plotly=4.9.3 tk=8.6.10 r-tcltk2=1.2_11 imagemagick=7.0.11_14 r-tidyverse=1.2.1 r-ggextra=0.8 r-ggpubr=0.4.0 samtools=1.12 sra-tools=2.9.1 pigz=2.6 htslib=1.10 tabix=0.2.6 perl-vcftools-vcf=0.1.16
. /opt/conda/etc/profile.d/conda.sh
conda activate findZX

%environment
    export PATH="/opt/conda/envs/findZX/bin:/opt/conda/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin"

%runscript
    exec "$@"
