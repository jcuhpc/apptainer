Bootstrap: localimage
From: /gpfs01/sw/containers/ubuntu-20.04.sif

%runscript
exec "$@"

%post
cd /opt  &&  \
VERS=1.1.1  &&  \
apt-get update &&  \
apt-get install -y default-jre fort77 ftp gfortran libblas-dev libbz2-dev libcairo2-dev libcurl4-openssl-dev libdb-dev libghc-zlib-dev libjpeg-dev \
liblzma-dev libncurses-dev libncurses5-dev libpcre3-dev libpng-dev libreadline-dev libreadline-dev \
libssl-dev libtbb-dev libx11-dev libxml2-dev libxt-dev libzmq3-dev pkg-config python3-distutils python3-pip python3-setuptools \
rsync texlive-latex-base x11-common  &&  \
apt-get	install --fix-missing  &&  \
apt-get update  &&  \
wget https://github.com/TrinityCTAT/CTAT-LR-fusion/releases/download/ctat-LR-fusion-v$VERS/CTAT-LR-fusion.FULL.v$VERS.tar.gz  &&  \
tar xvf CTAT-LR-fusion.FULL.v$VERS.tar.gz  &&  \
mv CTAT-LR-fusion.v$VERS CTAT-LR-fusion  &&  \
cd CTAT-LR-fusion  &&  \
make  &&  \
apt-get clean  &&  apt-get purge  &&  rm -rf /var/lib/apt/lists/*

%environment
export PATH="/opt/CTAT-LR-fusion:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin"

