BootStrap: localimage
From: /gpfs01/sw/containers/Rbase-4.4.0.sif

%runscript
exec "$@"

%post
mkdir /library  &&  \
apt-get update  &&  \
apt-get install -y libarchive-dev libfreetype6 libfreetype6-dev \
                   libfribidi-dev libharfbuzz-dev openjdk-11-jdk  &&  \
apt-get clean  &&  apt-get purge  &&  rm -rf /var/lib/apt/lists/*  &&  \
R --slave -e 'install.packages("devtools", Ncpus = 6)'  &&  \
R --slave -e 'install.packages("BiocManager")'  &&  \
R --slave -e 'BiocManager::install()'  &&  \
R --slave -e 'BiocManager::install("ctc")'  &&  \
R --slave -e 'BiocManager::install("dada2")'  &&  \
R --slave -e 'BiocManager::install("LEA")'  &&  \
R --slave -e 'BiocManager::install("mixOmics")'  &&  \
R --slave -e 'BiocManager::install("phyloseq")'  &&  \
R --slave -e 'BiocManager::install("proteomics")'  &&  \
R --slave -e 'BiocManager::install("qvalue")'  &&  \
R --slave -e 'BiocManager::install("RcppRoll")'  &&  \
R --slave -e 'BiocManager::install("RNAseq123")'  &&  \
R --slave -e 'BiocManager::install("rnaseqGene")'  &&  \
R --slave -e 'BiocManager::install("sequencing")'  &&  \
R --slave -e 'BiocManager::install("skimr")'  &&  \
R --slave -e 'BiocManager::install("SNPRelate")'  &&  \
R --slave -e 'install.packages("lme4")'  &&  \
R --slave -e 'install.packages("ranger")'  &&  \
R --slave -e 'install.packages("abc")'  &&  \
R --slave -e 'install.packages("actuar")'  &&  \
R --slave -e 'install.packages("ade4")'  &&  \
R --slave -e 'install.packages("ade4TkGUI")'  &&  \
R --slave -e 'install.packages("adegenet")'  &&  \
R --slave -e 'install.packages("adehabitatHR")'  &&  \
R --slave -e 'install.packages("agricolae")'  &&  \
R --slave -e 'install.packages("AICcmodavg")'  &&  \
R --slave -e 'install.packages("akima")'  &&  \
R --slave -e 'install.packages("AlgDesign")'  &&  \
R --slave -e 'install.packages("amap")'  &&  \
R --slave -e 'install.packages("AmpGram")'  &&  \
R --slave -e 'install.packages("Amelia")'  &&  \
R --slave -e 'install.packages("amt")'  &&  \
R --slave -e 'install.packages("archive")'  &&  \
R --slave -e 'install.packages("arm")'  &&  \
R --slave -e 'install.packages("arrayhelpers")'  &&  \
R --slave -e 'install.packages("future.batchtools")'  &&  \
R --slave -e 'install.packages("bayesplot")'  &&  \
R --slave -e 'install.packages("BB")'  &&  \
R --slave -e 'install.packages("BDgraph")'  &&  \
R --slave -e 'install.packages("bestglm")'  &&  \
R --slave -e 'install.packages("betapart")'  &&  \
R --slave -e 'install.packages("betareg")'  &&  \
R --slave -e 'install.packages("BiasedUrn")'  &&  \
R --slave -e 'install.packages("bibtex")'  &&  \
R --slave -e 'install.packages("biglm")'  &&  \
R --slave -e 'install.packages("bigsnpr")'  &&  \
R --slave -e 'install.packages("bigstatsr")'  &&  \
R --slave -e 'install.packages("BiodiversityR")'  &&  \
R --slave -e 'install.packages("biomod2")'  &&  \
R --slave -e 'install.packages("bootstrap")'  &&  \
R --slave -e 'install.packages("bridgesampling")'  &&  \
R --slave -e 'install.packages("brms")'  &&  \
R --slave -e 'install.packages("broom.mixed")'  &&  \
R --slave -e 'install.packages("BUSpaRse")'  &&  \
R --slave -e 'install.packages("calibrator")'  &&  \
R --slave -e 'install.packages("candisc")'  &&  \
R --slave -e 'install.packages("catspec")'  &&  \
R --slave -e 'install.packages("CCA")'  &&  \
R --slave -e 'install.packages("chron")'  &&  \
R --slave -e 'install.packages("cmprsk")'  &&  \
R --slave -e 'install.packages("colourvalues")'  &&  \
R --slave -e 'install.packages("CompQuadForm")'  &&  \
R --slave -e 'install.packages("convevol")'  &&  \
R --slave -e 'install.packages("corrplot")'  &&  \
R --slave -e 'install.packages("covr")'  &&  \
R --slave -e 'install.packages("cowplot")'  &&  \
R --slave -e 'install.packages("coxme")'  &&  \
R --slave -e 'install.packages("cubelyr")'  &&  \
R --slave -e 'install.packages("d3Network")'  &&  \
R --slave -e 'install.packages("DAAG")'  &&  \
R --slave -e 'install.packages("dartR")'  &&  \
R --slave -e 'install.packages("date")'  &&  \
R --slave -e 'install.packages("degreenet")'  &&  \
R --slave -e 'install.packages("denstrip")'  &&  \
R --slave -e 'install.packages("DEoptim")'  &&  \
R --slave -e 'install.packages("dfoptim")'  &&  \
R --slave -e 'install.packages("DHARMa")'  &&  \
R --slave -e 'install.packages("DiagrammeR")'  &&  \
R --slave -e 'install.packages("distributional")'  &&  \
R --slave -e 'install.packages("diveRsity")'  &&  \
R --slave -e 'install.packages("doParallel")'  && \
R --slave -e 'install.packages("doMC")'  &&  \
R --slave -e 'install.packages("doSNOW")'  &&  \
R --slave -e 'install.packages("downloader")'  &&  \
R --slave -e 'install.packages("dynlm")'  &&  \
R --slave -e 'install.packages("earth")'
R --slave -e 'install.packages("EasyABC")'  &&  \
R --slave -e 'install.packages("Ecdat")'  &&  \
R --slave -e 'install.packages("Ecfun")'  &&  \
R --slave -e 'install.packages("ecodist")'  &&  \
R --slave -e 'install.packages("effects")'  &&  \
R --slave -e 'install.packages("ellipse")'  &&  \
R --slave -e 'install.packages("EMT")'  &&  \
R --slave -e 'install.packages("ergm")'  &&  \
R --slave -e 'install.packages("expint")'  &&  \
R --slave -e 'install.packages("extraDistr")'  &&  \
R --slave -e 'install.packages("extrafont")'  &&  \
R --slave -e 'install.packages("extrafontdb")'  &&  \
R --slave -e 'install.packages("faraway")'  &&  \
R --slave -e 'install.packages("fastmatrix")'  &&  \
R --slave -e 'install.packages("fAsianOptions")'  &&  \
R --slave -e 'install.packages("FD")'  &&  \
R --slave -e 'install.packages("ff")'  &&  \
R --slave -e 'install.packages("FKF")'  &&  \
R --slave -e 'install.packages("flexclust")'  &&  \
R --slave -e 'install.packages("fmsb")'  &&  \
R --slave -e 'install.packages("fOptions")'  &&  \
R --slave -e 'install.packages("fossil")'  &&  \
R --slave -e 'install.packages("fts")'  &&  \
R --slave -e 'install.packages("furrr")'  &&  \
R --slave -e 'install.packages("gam")'  &&  \
R --slave -e 'install.packages("gamlss")'  &&  \
R --slave -e 'install.packages("gamm4")'  &&  \
R --slave -e 'install.packages("gbRd")'  &&  \
R --slave -e 'install.packages("gclus")'  &&  \
R --slave -e 'install.packages("gdistance")'  &&  \
R --slave -e 'install.packages("gdm")'  &&  \
R --slave -e 'install.packages("gdtools")'  &&  \
R --slave -e 'install.packages("gee")'  &&  \
R --slave -e 'install.packages("geepack")'  &&  \
R --slave -e 'install.packages("geigen")'
R --slave -e 'install.packages("geiger")'  &&  \
R --slave -e 'install.packages("genetics")'  &&  \
R --slave -e 'install.packages("geoR")'  &&  \
R --slave -e 'install.packages("getopt")'  &&  \
R --slave -e 'install.packages("ggdendro")'  &&  \
R --slave -e 'install.packages("ggdist")'  &&  \
R --slave -e 'install.packages("ggeffects")'  &&  \
R --slave -e 'install.packages("ggforce")'  &&  \
R --slave -e 'install.packages("ggfortify")'  &&  \
R --slave -e 'install.packages("ggm")'  &&  \
R --slave -e 'install.packages("ggmcmc")'  &&  \
R --slave -e 'install.packages("ggplot2movies")'  &&  \
R --slave -e 'install.packages("ggraph")'  &&  \
R --slave -e 'install.packages("ggrepel")'  &&  \
R --slave -e 'install.packages("glcm")'  &&  \
R --slave -e 'install.packages("glmmTMB")'  &&  \
R --slave -e 'install.packages("gmp")'  &&  \
R --slave -e 'install.packages("glue")'  &&  \
R --slave -e 'install.packages("GPArotation")'  &&  \
R --slave -e 'install.packages("gpclib")'  &&  \
R --slave -e 'install.packages("graphlayouts")'  &&  \
R --slave -e 'install.packages("gsalib")'  &&  \
R --slave -e 'install.packages("gstat")'  &&  \
R --slave -e 'install.packages("gsubfn")'  &&  \
R --slave -e 'install.packages("HDInterval")'  &&  \
R --slave -e 'install.packages("hierfstat")'  &&  \
R --slave -e 'install.packages("hier.part")'  &&  \
R --slave -e 'install.packages("highlight")'  &&  \
R --slave -e 'install.packages("highr")'  &&  \
R --slave -e 'install.packages("HSAUR")'  &&  \
R --slave -e 'install.packages("HSAUR2")'  &&  \
R --slave -e 'install.packages("huge")'  &&  \
R --slave -e 'install.packages("hydroPSO")'  &&  \
R --slave -e 'install.packages("hypergeo")'  &&  \
R --slave -e 'install.packages("igraph")'  &&  \
R --slave -e 'install.packages("igraphdata")'  &&  \
R --slave -e 'install.packages("influence.ME")'  &&  \
R --slave -e 'install.packages("inline")'  &&  \
R --slave -e 'install.packages("intergraph")'  &&  \
R --slave -e 'install.packages("intervals")'  &&  \
R --slave -e 'install.packages("ipred")'  &&  \
R --slave -e 'install.packages("irlba")'  &&  \
R --slave -e 'install.packages("ISwR")'  &&  \
R --slave -e 'install.packages("iterators")'  &&  \
R --slave -e 'install.packages("itertools")'  &&  \
R --slave -e 'install.packages("janitor")'  &&  \
R --slave -e 'install.packages("jomo")'  &&  \
R --slave -e 'install.packages("Kendall")'  &&  \
R --slave -e 'install.packages("ks")'  &&  \
R --slave -e 'install.packages("Lahman")'  &&  \
R --slave -e 'install.packages("latentnet")'  &&  \
R --slave -e 'install.packages("ldatuning")'  &&  \
R --slave -e 'install.packages("lgcp")'  &&  \
R --slave -e 'install.packages("lmerTest")'  &&  \
R --slave -e 'install.packages("logitnorm")'  &&  \
R --slave -e 'install.packages("logspline")'  &&  \
R --slave -e 'install.packages("lokern")'  &&  \
R --slave -e 'install.packages("loo")'  &&  \
R --slave -e 'install.packages("lsmeans")'  &&  \
R --slave -e 'install.packages("ltm")'  &&  \
R --slave -e 'install.packages("magick")'  &&  \
R --slave -e 'install.packages("mapdata")'  &&  \
R --slave -e 'install.packages("mapproj")'  &&  \
R --slave -e 'install.packages("maptree")'  &&  \
R --slave -e 'install.packages("maptools")'  &&  \
R --slave -e 'install.packages("mAr")'  &&  \
R --slave -e 'install.packages("Matching")'  &&  \
R --slave -e 'install.packages("MatchIt")'  &&  \
R --slave -e 'install.packages("matrixcalc")'  &&  \
R --slave -e 'install.packages("maxlike")'  &&  \
R --slave -e 'install.packages("maxnet")'
R --slave -e 'install.packages("mboost")'  &&  \
R --slave -e 'install.packages("mcgibbsit")'  &&  \
R --slave -e 'install.packages("mcmc")'  &&  \
R --slave -e 'install.packages("MCMCglmm")'  &&  \
R --slave -e 'install.packages("mda")'
R --slave -e 'install.packages("mediation")'  &&  \
R --slave -e 'install.packages("MEMSS")'  &&  \
R --slave -e 'install.packages("mice")'  &&  \
R --slave -e 'install.packages("microbenchmark")'  &&  \
R --slave -e 'install.packages("mitml")'  &&  \
R --slave -e 'install.packages("mitools")'  &&  \
R --slave -e 'install.packages("mix")'  &&  \
R --slave -e 'install.packages("mlergm")'  &&  \
R --slave -e 'install.packages("mlmRev")'  &&  \
R --slave -e 'install.packages("mlogit")'  &&  \
R --slave -e 'install.packages("mlr3verse")'  &&  \
R --slave -e 'install.packages("mlr3spatial")'  &&  \
R --slave -e 'install.packages("mlr3spatiotempcv")'  &&  \
R --slave -e 'install.packages("moments")'  &&  \
R --slave -e 'install.packages("momentuHMM")'  &&  \
R --slave -e 'install.packages("mondate")'  &&  \
R --slave -e 'install.packages("MPV")'  &&  \
R --slave -e 'BiocManager::install("msa")'  && \
R --slave -e 'install.packages("multcompView")'  &&  \
R --slave -e 'install.packages("MuMIn")'  &&  \
R --slave -e 'install.packages("MVA")'  &&  \
R --slave -e 'install.packages("mvabund")'  &&  \
R --slave -e 'install.packages("mvna")'  &&  \
R --slave -e 'install.packages("nleqslv")'  &&  \
R --slave -e 'install.packages("optparse")'  &&  \
R --slave -e 'install.packages("osfr")'  &&  \
R --slave -e 'install.packages("pan")'  &&  \
R --slave -e 'install.packages("party")'  &&  \
R --slave -e 'install.packages("patchwork")'  &&  \
R --slave -e 'install.packages("pastecs")'  &&  \
R --slave -e 'install.packages("PBSmapping")'  &&  \
R --slave -e 'install.packages("pcadapt")'  &&  \
R --slave -e 'install.packages("pdp")'  &&  \
R --slave -e 'install.packages("pegas")'  &&  \
R --slave -e 'install.packages("pkgKitten")'  &&  \
R --slave -e 'install.packages("PKPDmodels")'  &&  \
R --slave -e 'install.packages("plm")'  &&  \
R --slave -e 'install.packages("plotMCMC")'  &&  \
R --slave -e 'install.packages("PMCMR")'  &&  \
R --slave -e 'install.packages("png")'  &&  \
R --slave -e 'install.packages("poilog")'  &&  \
R --slave -e 'install.packages("polspline")'  &&  \
R --slave -e 'install.packages("polysat")'  &&  \
R --slave -e 'install.packages("poolfstat")'
R --slave -e 'install.packages("poppr")'  &&  \
R --slave -e 'install.packages("projpred")'  &&  \
R --slave -e 'install.packages("proto")'  &&  \
R --slave -e 'install.packages("proxyC")'  &&  \
R --slave -e 'install.packages("pscl")'  &&  \
R --slave -e 'install.packages("qtl")'  &&  \
R --slave -e 'install.packages("quadmesh")'  &&  \
R --slave -e 'install.packages("quanteda")'  &&  \
R --slave -e 'install.packages("R.rsp")'  &&  \
R --slave -e 'install.packages("R2admb")'  &&  \
R --slave -e 'install.packages("R2OpenBUGS")'  &&  \
R --slave -e 'install.packages("R2WinBUGS")'  &&  \
R --slave -e 'BiocManager::install("R453Plus1Toolbox")'  &&  \
R --slave -e 'install.packages("random")'  &&  \
R --slave -e 'install.packages("randomForest")'  &&  \
R --slave -e 'install.packages("RANN")'  &&  \
R --slave -e 'install.packages("raster")'  &&  \
R --slave -e 'install.packages("rayrender")'  &&  \
R --slave -e 'install.packages("rayshader")'  &&  \
R --slave -e 'install.packages("rbenchmark")'  &&  \
R --slave -e 'BiocManager::install("rBLAST")'  && \
R --slave -e 'install.packages("rcdd")'  &&  \
R --slave -e 'install.packages("Rcsdp")'  &&  \
R --slave -e 'install.packages("relaimpo")'  &&  \
R --slave -e 'install.packages("relevent")'  &&  \
R --slave -e 'install.packages("rex")'  &&  \
R --slave -e 'install.packages("Rfast")'  &&  \
R --slave -e 'install.packages("rgexf")'  &&  \
R --slave -e 'install.packages("rJava")'  &&  \
R --slave -e 'install.packages("RJSONIO")'  &&  \
R --slave -e 'install.packages("RLRsim")'  &&  \
R --slave -e 'install.packages("rmeta")'  &&  \
R --slave -e 'install.packages("rms")'  &&  \
R --slave -e 'install.packages("RMySQL")'  &&  \
R --slave -e 'install.packages("ROCR")'  &&  \
R --slave -e 'install.packages("RODBC")'  &&  \
R --slave -e 'install.packages("Rook")'  &&  \
R --slave -e 'install.packages("RSAGA")'  &&  \
R --slave -e 'install.packages("rstanarm")'  &&  \
R --slave -e 'install.packages("rtdists")'  &&  \
R --slave -e 'install.packages("RTriangle")'  &&  \
R --slave -e 'install.packages("Rttf2pt1")'  &&  \
R --slave -e 'install.packages("RWiener")'  &&  \
R --slave -e 'install.packages("sampleSelection")'  &&  \
R --slave -e 'install.packages("servr")'  &&  \
R --slave -e 'install.packages("setRNG")'  &&  \
R --slave -e 'install.packages("Seurat")'  &&  \
R --slave -e 'install.packages("sf")'  &&  \
R --slave -e 'install.packages("sgeostat")'  &&  \
R --slave -e 'install.packages("shapes")'  &&  \
R --slave -e 'install.packages("silicate")'  &&  \
R --slave -e 'install.packages("SimComp")'  &&  \
R --slave -e 'install.packages("SimRAD")'  &&  \
R --slave -e 'install.packages("sjlabelled")'  &&  \
R --slave -e 'install.packages("sjPlot")'  &&  \
R --slave -e 'install.packages("slider")'  &&  \
R --slave -e 'install.packages("slingshot")'  &&  \
R --slave -e 'install.packages("spdep")'  &&  \
R --slave -e 'install.packages("splines2")'  &&  \
R --slave -e 'install.packages("snowfall")'  &&  \
R --slave -e 'install.packages("snowFT")'  &&  \
R --slave -e 'install.packages("SOAR")'  &&  \
R --slave -e 'install.packages("som")'  &&  \
R --slave -e 'install.packages("sp")'  &&  \
R --slave -e 'install.packages("sparr")'  &&  \
R --slave -e 'install.packages("SpatialTools")'  &&  \
R --slave -e 'install.packages("spgrass6")'  &&  \
R --slave -e 'install.packages("splancs")'  &&  \
R --slave -e 'install.packages("spm")'  &&  \
R --slave -e 'install.packages("spThin")'  &&  \
R --slave -e 'install.packages("sqldf")'  &&  \
R --slave -e 'install.packages("stringdist")'  &&  \
R --slave -e 'install.packages("subselect")'  &&  \
R --slave -e 'install.packages("svGUI")'  &&  \
R --slave -e 'install.packages("svMisc")'  &&  \
R --slave -e 'install.packages("svUnit")'  &&  \
R --slave -e 'install.packages("tables")'  &&  \
R --slave -e 'install.packages("terra")'  &&  \
R --slave -e 'install.packages("textmineR")'  &&  \
R --slave -e 'install.packages("tgp")'  &&  \
R --slave -e 'install.packages("tidybayes")'  &&  \
R --slave -e 'install.packages("tidygraph")'  &&  \
R --slave -e 'install.packages("tidymodels")'  &&  \
R --slave -e 'install.packages("tidyterra")'  &&  \
R --slave -e 'install.packages("tidytext")'  &&  \
R --slave -e 'install.packages("tidyverse")'  &&  \
R --slave -e 'install.packages("tm")'  &&  \
R --slave -e 'install.packages("TMB")'  &&  \
R --slave -e 'install.packages("tradeSeq")'  &&  \
R --slave -e 'install.packages("tree")'  &&  \
R --slave -e 'install.packages("trip")'  &&  \
R --slave -e 'install.packages("tripack")'  &&  \
R --slave -e 'install.packages("topicmodels")'  &&  \
R --slave -e 'install.packages("truncreg")'  &&  \
R --slave -e 'install.packages("TSA")'  &&  \
R --slave -e 'install.packages("tweenr")'  &&  \
R --slave -e 'install.packages("ucminf")'  &&  \
R --slave -e 'install.packages("unmarked")'  &&  \
R --slave -e 'install.packages("untb")'  &&  \
R --slave -e 'install.packages("urca")'  &&  \
R --slave -e 'install.packages("usdm")'  &&  \
R --slave -e 'install.packages("vcfR")'  &&  \
R --slave -e 'install.packages("vegan")'  &&  \
R --slave -e 'install.packages("vegan3d")'  &&  \
R --slave -e 'install.packages("VGAM")'  &&  \
R --slave -e 'install.packages("VIM")'  &&  \
R --slave -e 'install.packages("VSURF")'  &&  \
R --slave -e 'install.packages("waveslim")'  &&  \
R --slave -e 'install.packages("wavethresh")'  &&  \
R --slave -e 'install.packages("wosr")'  &&  \
R --slave -e 'install.packages("xgboost")'  && \\
R --slave -e 'install.packages("xts")'  &&  \
R --slave -e 'install.packages("yhat")'  &&  \
R --slave -e 'install.packages("zoeppritz")'  &&  \
R --slave -e 'remotes::install_github("hypertidy/anglr")'  &&  \
R --slave -e 'devtools::install_github("mrke/NicheMapR")'  &&  \
R --slave -e 'devtools::install_github("immunedynamics/spectre")'  &&  \
R --slave -e 'require(devtools);install_github("uyedaj/bayou");require(bayou)'  &&  \
R --slave -e 'require(devtools);install_github("whitlock/OutFLANK")'  &&  \
R --slave -e 'install.packages("https://cran.r-project.org/src/contrib/Archive/rtiff/rtiff_1.4.8.tar.gz", repos=NULL, type="source")'  &&  \
R --slave -e 'install.packages("https://cran.r-project.org/src/contrib/Archive/sendplot/sendplot_4.0.0.tar.gz", repos=NULL, type="source")'  &&  \
R --slave -e 'install.packages("https://cran.r-project.org/src/contrib/Archive/nws/nws_1.7.0.1.tar.gz", repos=NULL, type="source")'  &&  \
R --slave -e 'install.packages("https://cran.r-project.org/src/contrib/Archive/RSVGTipsDevice/RSVGTipsDevice_1.0-7.tar.gz", repos=NULL, type="source")'  &&  \
R --slave -e 'install.packages("https://cran.r-project.org/src/contrib/Archive/DMwR/DMwR_0.4.1.tar.gz", repos=NULL, type="source")'  &&  \
R --slave -e 'library(AmpGram);install_AmpGramModel()'  &&  \
R --slave -e 'install.packages("cmdstanr", repos = c("https://mc-stan.org/r-packages/", getOption("repos")))'  &&  \
R --slave -e 'BiocManager::install("decontam")'  && \
R --slave -e 'devtools::install_github("vmikk/metagMisc")'  && \
R --slave -e 'remotes::install_github("mikemc/speedyseq")'  && \
echo "options(repos = c(CRAN = 'https://cran.rstudio.com/'), download.file.method = 'libcurl')" >> /usr/lib/R/etc/Rprofile.site  &&  \
echo "R_LIBS_SITE=/library:\${R_LIBS_SITE}" >> /usr/lib/R/etc/Renviron.site
# Last 2 lines: "to shut R up" (WS)

%test
R --quiet -e "stopifnot(getRversion() == '${R_VERSION}')"

